<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Packaging functionality | Reproducible Research Data &amp; Project Management in R</title>
  <meta name="description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Packaging functionality | Reproducible Research Data &amp; Project Management in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://annakrystalli.me/rrresearchACCE20" />
  
  <meta property="og:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="github-repo" content="annakrystalli/rrresearchACCE20" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Packaging functionality | Reproducible Research Data &amp; Project Management in R" />
  
  <meta name="twitter:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  

<meta name="author" content="Course Instructor: Anna Krystalli" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="additional.html"/>
<link rel="next" href="creating-a-research-compendium-with-rrtools.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet" />
<script src="libs/jsoneditor-5.25.6/jsoneditor.min.js"></script>
<script src="libs/jsonedit-binding-3.0.0/jsonedit.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.12/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reproducible Research Data & Project Management in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course description</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#learning-outcomes"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-outline"><i class="fa fa-check"></i>Course Outline</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#optional"><i class="fa fa-check"></i>Optional</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="welcome-slides.html"><a href="welcome-slides.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Basics</b></span></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html"><i class="fa fa-check"></i>Intro to R &amp; Rstudio</a><ul>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html#rstudio"><i class="fa fa-check"></i>Rstudio</a></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html#working-with-r-in-rstudio-cloud"><i class="fa fa-check"></i>Working with R in Rstudio cloud</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i>R Basics</a><ul>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#using-r-in-the-console"><i class="fa fa-check"></i>Using R in the console</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#working-in-scripts"><i class="fa fa-check"></i>Working in scripts</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#using-r-as-a-calculator"><i class="fa fa-check"></i>Using R as a calculator</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#mathematical-functions"><i class="fa fa-check"></i>Mathematical functions</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#variables-and-assignment"><i class="fa fa-check"></i>Variables and assignment</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#comparing-things"><i class="fa fa-check"></i>Comparing things</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html"><i class="fa fa-check"></i>Data types, structures and classes</a><ul>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#base-types"><i class="fa fa-check"></i>Base types</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#base-data-types"><i class="fa fa-check"></i>Base data types</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#data-structures"><i class="fa fa-check"></i>Data Structures</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#lists"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#data.frames"><i class="fa fa-check"></i>Data.frames</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html"><i class="fa fa-check"></i>Indexing and subsetting</a><ul>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#subsetting-vectors"><i class="fa fa-check"></i>Subsetting vectors</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#matrix-subsetting"><i class="fa fa-check"></i>Matrix subsetting</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#subsetting-lists"><i class="fa fa-check"></i>Subsetting lists</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#subsetting-data.frames"><i class="fa fa-check"></i>Subsetting data.frames</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#advanced-r-cheat-sheet"><i class="fa fa-check"></i>Advanced R Cheat Sheet</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html"><i class="fa fa-check"></i>The tidyverse way</a><ul>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html#intro-to-the-tidyverse"><i class="fa fa-check"></i>Intro to the tidyverse</a></li>
<li><a href="the-tidyverse-way.html#tibbles"><code>tibbles</code></a></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html#subsetting-tibbles"><i class="fa fa-check"></i>Subsetting tibbles</a></li>
<li><a href="the-tidyverse-way.html#the-pipe-operator">The pipe operator <code>%&gt;%</code></a></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html#advanced-r-cheat-sheet-1"><i class="fa fa-check"></i>Advanced R Cheat Sheet</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rdm-intro-view.html"><a href="rdm-intro-view.html"><i class="fa fa-check"></i>Data management Basics</a></li>
<li class="part"><span><b>II Project Management</b></span></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html"><i class="fa fa-check"></i>Projects in Rstudio</a><ul>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html#general-project-organisation"><i class="fa fa-check"></i>General Project Organisation</a></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html#rstudio-projects"><i class="fa fa-check"></i>Rstudio Projects</a></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html#rstudio-cloud-projects"><i class="fa fa-check"></i>Rstudio Cloud projects</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="filenaming-view.html"><a href="filenaming-view.html"><i class="fa fa-check"></i>Good File Naming</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html"><i class="fa fa-check"></i>Paths and Project structure</a><ul>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html#project-data"><i class="fa fa-check"></i>Project Data</a></li>
<li><a href="path-proj-str.html#setting-up-a-data-raw-directory">Setting up a <code>data-raw/</code> directory</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html#neon-data"><i class="fa fa-check"></i>NEON Data</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html#paths"><i class="fa fa-check"></i>Paths</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html#basic-checks"><i class="fa fa-check"></i>Basic checks</a></li>
</ul></li>
<li class="part"><span><b>III Data Munging</b></span></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i>Iteration</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#iterating-using-loops"><i class="fa fa-check"></i>Iterating using loops</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#functional-programming"><i class="fa fa-check"></i>Functional programming</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#writing-out-our-tibble-to-disk"><i class="fa fa-check"></i>Writing out our tibble to disk</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-merge.html"><a href="data-merge.html"><i class="fa fa-check"></i>Merging data</a><ul>
<li class="chapter" data-level="" data-path="data-merge.html"><a href="data-merge.html#join-basics"><i class="fa fa-check"></i>Join Basics</a></li>
<li><a href="data-merge.html#joining-our-tables-with-dplyr">Joining our tables with <code>dplyr</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Functions</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#elements-of-a-function"><i class="fa fa-check"></i>Elements of a function</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#creating-our-user-built-functions"><i class="fa fa-check"></i>Creating our user-built functions</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#experimenting"><i class="fa fa-check"></i>Experimenting</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#developing-our-function"><i class="fa fa-check"></i>Developing our function</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#saving-analytical-data"><i class="fa fa-check"></i>Saving analytical data</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#final-processing-script"><i class="fa fa-check"></i>Final processing script:</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#final-function"><i class="fa fa-check"></i>Final function</a></li>
</ul></li>
<li class="part"><span><b>IV Working with metadata</b></span></li>
<li class="chapter" data-level="" data-path="metadata-slides.html"><a href="metadata-slides.html"><i class="fa fa-check"></i>Metadata</a></li>
<li><a href="dataspice.html#dataspice">Creating metadata with <code>dataspice</code></a><ul>
<li><a href="dataspice.html#dataspice-workflow"><code>dataspice</code> workflow</a></li>
<li class="chapter" data-level="" data-path="dataspice.html"><a href="dataspice.html"><i class="fa fa-check"></i>Create the metadata folder</a></li>
<li class="chapter" data-level="" data-path="dataspice.html"><a href="dataspice.html#record-metadata"><i class="fa fa-check"></i>Record metadata</a></li>
<li class="chapter" data-level="" data-path="dataspice.html"><a href="dataspice.html#create-metadata-json-ld-file"><i class="fa fa-check"></i>Create metadata json-ld file</a></li>
<li class="chapter" data-level="" data-path="dataspice.html"><a href="dataspice.html#build-readme-site"><i class="fa fa-check"></i>Build README site</a></li>
</ul></li>
<li class="part"><span><b>V Analysing and presenting analyses</b></span></li>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html"><i class="fa fa-check"></i>Plotting with ggplot2</a><ul>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html#data-visualisation-and-analysis-basics"><i class="fa fa-check"></i>Data visualisation and analysis basics</a></li>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html#graphics-in-r"><i class="fa fa-check"></i>Graphics in R</a></li>
<li><a href="plotting-with-ggplot2.html#data-visualisation-in-practice-exploring-individual-with-ggplot2">Data visualisation in practice: Exploring <code>individual</code> with <code>ggplot2</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html"><i class="fa fa-check"></i>Literate Programming in rmarkdown</a><ul>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html#literate-programming"><i class="fa fa-check"></i>Literate programming</a></li>
<li><a href="literate-programming-in-rmarkdown.html#literate-programming-in-r"><strong>Literate programming in R</strong></a></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html#applications-of-rmd-in-research"><i class="fa fa-check"></i>Applications of Rmd in research</a></li>
<li><a href="literate-programming-in-rmarkdown.html#rmd-in-practice"><code>Rmd</code> in Practice</a></li>
<li><a href="literate-programming-in-rmarkdown.html#advanced-.rmd">Advanced <code>.Rmd</code></a></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html#getting-help-with-markdown"><i class="fa fa-check"></i>Getting help with markdown</a></li>
<li><a href="literate-programming-in-rmarkdown.html#resources-1"><strong>Resources</strong></a></li>
</ul></li>
<li class="part"><span><b>VI Version Control</b></span></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html"><i class="fa fa-check"></i>Version Control with Git</a><ul>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#what-is-version-control"><i class="fa fa-check"></i>What is Version control? 🤔</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#what-is-git"><i class="fa fa-check"></i>What is git? 🤔</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#what-is-github"><i class="fa fa-check"></i>What is GitHub 🤔</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#git-github-rstudio"><i class="fa fa-check"></i>Git, Github &amp; Rstudio</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#demo"><i class="fa fa-check"></i>Demo</a></li>
<li><a href="version-control-with-git.html#how-does-git-work">How does <code>Git</code> work?</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#configure-git-github"><i class="fa fa-check"></i>Configure git &amp; GitHub</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#version-controlling-projects"><i class="fa fa-check"></i>Version Controlling projects</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#create-repository-on-github"><i class="fa fa-check"></i>Create repository on GitHub</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#host-html-content-on-github"><i class="fa fa-check"></i>Host html content on GitHub</a></li>
<li><a href="version-control-with-git.html#enable-gh-pages">Enable <code>gh-pages</code></a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#tracking-changes"><i class="fa fa-check"></i>Tracking changes</a></li>
<li><a href="version-control-with-git.html#ignoring-files-through-.gitignore">Ignoring files through <code>.gitignore</code></a></li>
<li><a href="version-control-with-git.html#git-tips"><code>Git</code> tips</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#further-resources"><i class="fa fa-check"></i>Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="collaborative-github.html"><a href="collaborative-github.html"><i class="fa fa-check"></i>Collaborative GitHub</a></li>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#practical-github-rstudio-for-collaborative-coding">Practical: <code>GitHub</code> &amp; <code>Rstudio</code> for collaborative coding</a><ul>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#evolottery"><strong>EvoLottery</strong></a></li>
<li class="chapter" data-level="" data-path="practical-github-rstudio-for-collaborative-coding.html"><a href="practical-github-rstudio-for-collaborative-coding.html"><i class="fa fa-check"></i>Clone Github repo</a></li>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#make-a-change-to-the-repo"><strong>Make a change to the repo</strong></a></li>
<li class="chapter" data-level="" data-path="practical-github-rstudio-for-collaborative-coding.html"><a href="practical-github-rstudio-for-collaborative-coding.html#commit-changes-locally-to-git"><i class="fa fa-check"></i>Commit changes locally to git</a></li>
<li class="chapter" data-level="" data-path="practical-github-rstudio-for-collaborative-coding.html"><a href="practical-github-rstudio-for-collaborative-coding.html#push-changes-to-github"><i class="fa fa-check"></i>Push changes to GitHub</a></li>
<li class="chapter" data-level="" data-path="practical-github-rstudio-for-collaborative-coding.html"><a href="practical-github-rstudio-for-collaborative-coding.html#create-pull-request"><i class="fa fa-check"></i>Create pull request</a></li>
</ul></li>
<li class="part"><span><b>VII Closing</b></span></li>
<li class="chapter" data-level="" data-path="closing-remarks.html"><a href="closing-remarks.html"><i class="fa fa-check"></i>Closing Remarks</a></li>
<li class="part"><span><b>VIII Additonal materials</b></span></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html"><i class="fa fa-check"></i>Packaging functionality</a><ul>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#r-package-structure"><i class="fa fa-check"></i>R Package Structure</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#r-package-conventions"><i class="fa fa-check"></i>R Package conventions:</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#software-engineering-approach"><i class="fa fa-check"></i>Software Engineering approach</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#anatomy-of-an-r-package"><i class="fa fa-check"></i>Anatomy of an R package</a></li>
<li><a href="packaging-functionality.html#description-file"><code>DESCRIPTION</code> file</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#dependency-management"><i class="fa fa-check"></i>Dependency management</a></li>
<li><a href="packaging-functionality.html#r-1"><code>R/</code></a></li>
<li><a href="packaging-functionality.html#document-functions-with-roxygen">Document functions with <code>Roxygen</code></a></li>
<li><a href="packaging-functionality.html#tests"><code>tests/</code></a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#create-your-first-package"><i class="fa fa-check"></i>💻Create your first package</a></li>
<li><a href="packaging-functionality.html#functions-in-the-r-dir">🚦 Functions in the <strong><code>R/</code></strong> dir</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#roxygen-documentation"><i class="fa fa-check"></i>🚦 Roxygen documentation</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#personalise-function"><i class="fa fa-check"></i>🚦 Personalise function</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-some-fun"><i class="fa fa-check"></i>Add some fun!</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#check-package-integrity"><i class="fa fa-check"></i>🚦 Check package integrity</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-dependencies"><i class="fa fa-check"></i>🚦 Add dependencies</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-license"><i class="fa fa-check"></i>Add License</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-test"><i class="fa fa-check"></i>🚦 Add Test</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#create-test-file"><i class="fa fa-check"></i>create test file</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#write-test"><i class="fa fa-check"></i>Write test</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#complete-package-metadata"><i class="fa fa-check"></i>🚦 Complete package metadata</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#authors"><i class="fa fa-check"></i>Authors</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-a-title-and-description"><i class="fa fa-check"></i>Add a title and description</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-a-date"><i class="fa fa-check"></i>Add a date</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#create-readme"><i class="fa fa-check"></i>🚦 Create README</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#commit-and-push-to-github"><i class="fa fa-check"></i>Commit and push to GitHub</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#create-documentation-site"><i class="fa fa-check"></i>🚦 Create documentation site</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html"><i class="fa fa-check"></i>Creating a research compendium with rrtools</a><ul>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#background"><i class="fa fa-check"></i>Background</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#enter-the-research-compendium"><i class="fa fa-check"></i>Enter the Research Compendium</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#r-community-response"><i class="fa fa-check"></i>R community response</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#general-project-organisation-1"><i class="fa fa-check"></i>General Project Organisation</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#from-raw-to-analytical-data"><i class="fa fa-check"></i>From raw to analytical data</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#separate-function-definition-and-application"><i class="fa fa-check"></i>Separate function definition and application</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#use-rstudio-projects"><i class="fa fa-check"></i>Use Rstudio projects</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#follow-convention"><i class="fa fa-check"></i>Follow convention</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#r-developer-tools"><i class="fa fa-check"></i>R Developer Tools</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#rrtools-research-compendia-in-r"><code>rrtools</code>: Research Compendia in R</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#workshop-materials"><i class="fa fa-check"></i>💻 Workshop materials</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#data"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#workshop-aims-and-objectives"><i class="fa fa-check"></i>Workshop aims and objectives</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#rrtools-setup"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#create-compendium"><i class="fa fa-check"></i>🚦 Create compendium</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#update-description-file">🚦 Update <code>DESCRIPTION</code> file</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#sharing-a-compendium-on-github"><i class="fa fa-check"></i>🚦Sharing a compendium on GitHub</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#create-readme-1"><i class="fa fa-check"></i>Create README</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#update-readme">update <code>README</code></a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#create-github-repository"><i class="fa fa-check"></i>🚦 Create GitHub repository</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#setting-up-the-analysis-folder"><i class="fa fa-check"></i>🚦 Setting up the analysis folder</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#create-analysis">Create <code>analysis</code></a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#reproduce-a-paper-in-rmd"><i class="fa fa-check"></i>🚦 Reproduce a paper in Rmd</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#setup-data"><i class="fa fa-check"></i>Setup data</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#inspect-analysis.r-file"><i class="fa fa-check"></i>Inspect analysis.R file</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#create-journal-article-template-using-rticles">🚦 Create journal article template using <code>rticles</code></a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#update-yaml"><i class="fa fa-check"></i>🚦 Update YAML</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#add-text"><i class="fa fa-check"></i>🚦 Add text</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#update-references"><i class="fa fa-check"></i>🚦 Update references</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#update-math"><i class="fa fa-check"></i>🚦 Update math</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#add-code"><i class="fa fa-check"></i>🚦 Add code</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#render-final-document-to-pdf"><i class="fa fa-check"></i>Render final document to pdf</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#add-paper-dependencies"><i class="fa fa-check"></i>🚦 Add paper dependencies</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#final-compendium"><i class="fa fa-check"></i>Final compendium</a></li>
</ul></li>
<li class="part"><span><b>IX APPENDIX</b></span></li>
<li><a href="geolocate-r.html#geolocate.r"><code>geolocate.R</code></a></li>
<li><a href="analysis-r-1.html#analysis.r-1"><code>analysis.R</code></a></li>
<li><a href="index-rmd.html#index.rmd"><code>index.Rmd</code></a></li>
<li><a href="gitignore.html#gitignore"><code>.gitignore</code></a></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i>Software Setup</a><ul>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html#software-requirements"><i class="fa fa-check"></i>Software Requirements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i>Solutions</a></li>
<li class="divider"></li>
<li><a href="https://annakrystalli.me/rrreasearchACCE2020" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Research Data &amp; Project Management in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="packaging-functionality" class="section level1">
<h1>Packaging functionality</h1>
<div id="r-package-structure" class="section level2">
<h2>R Package Structure</h2>
<p>Used to share functionality with the R community</p>
<ul>
<li><p>Useful <strong>conventions</strong></p></li>
<li><p>Useful <strong>software development tools</strong></p></li>
<li><p>Easy <strong>publishing</strong> through GitHub</p></li>
</ul>
</div>
<div id="r-package-conventions" class="section level2">
<h2>R Package conventions:</h2>
<ul>
<li><p><strong>metadata</strong>: in the <strong><code>DESCRIPTION</code> file</strong></p></li>
<li><p><strong>functions</strong> in <strong><code>.R</code> scripts</strong> in the <strong><code>R/</code> folder</strong></p></li>
<li><p><strong>tests</strong> in the <strong><code>tests/</code> folder</strong></p></li>
<li><strong>Documentation:</strong>
<ul>
<li><em>functions</em> using <strong>Roxygen notation</strong></li>
<li><em>workflows</em> using <strong><code>.Rmd</code> documents</strong> in the <strong><code>vignettes/</code></strong> folder</li>
</ul></li>
</ul>
</div>
<div id="software-engineering-approach" class="section level2">
<h2>Software Engineering approach</h2>
<p>Following conventions allows us to <strong>make use of automated tools</strong> for:</p>
<ul>
<li><p><strong>Checking</strong> and <strong>testing code</strong></p></li>
<li><p><strong>Producing documentation</strong> for code and workflows</p></li>
<li><p><strong>Publishing, distributing</strong> and <strong>citing</strong> code</p></li>
</ul>
</div>
<div id="anatomy-of-an-r-package" class="section level2">
<h2>Anatomy of an R package</h2>
<p>Let’s use <a href="https://github.com/ropenscilabs/pkgreviewr"><code>pkgreviewr</code></a>, a package I authored to help automate some aspects of the rOpenSci review process, as an example to examine some elements of what makes a package:</p>
</div>
<div id="description-file" class="section level2">
<h2><code>DESCRIPTION</code> file</h2>
<p>Capture metadata around the package
- Functionality description
- Creators
- License</p>
<pre><code>Package: pkgreviewr
Type: Package
Title: rOpenSci package review project template
Version: 0.1.1
Authors@R: c(person(&quot;Anna&quot;, &quot;Krystalli&quot;, email = &quot;annakrystalli@googlemail.com&quot;,
                  role = c(&quot;aut&quot;, &quot;cre&quot;)),
             person(&quot;Maëlle&quot;, &quot;Salmon&quot;, email = &quot;maelle.salmon@yahoo.se&quot;, role = &quot;aut&quot;))
Description: Creates files and collects materials necessary to complete an rOpenSci package review. 
    Review files are prepopulated with review package specific metadata. Review package source code is
    also cloned for local testing and inspection.
License: GPL-3 + file LICENSE
URL: https://github.com/ropenscilabs/pkgreviewr
BugReports: https://github.com/ropenscilabs/pkgreviewr/issues
Encoding: UTF-8
LazyData: true
Imports:
    devtools,
    git2r (&gt;= 0.23.0),
    usethis (&gt;= 1.2.0),
    here,
    reprex,
    gh,
    base64enc,
    whoami,
    magrittr,
    covr,
    goodpractice,
    assertthat,
    httr,
    rstudioapi,
    clipr,
    clisymbols,
    crayon,
    dplyr,
    glue,
    fs,
    urltools,
    shiny
Suggests: 
    testthat,
    mockery,
    knitr,
    rmarkdown
RoxygenNote: 6.1.1
Remotes: 
    ropensci/git2r
VignetteBuilder: knitr
Roxygen: list(markdown = TRUE)
</code></pre>
<div id="citation" class="section level3">
<h3>citation</h3>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb574-1" data-line-number="1"><span class="kw">citation</span>(<span class="st">&quot;pkgreviewr&quot;</span>)</a></code></pre></div>
<pre><code>## 
## To cite package &#39;pkgreviewr&#39; in publications use:
## 
##   Anna Krystalli and Maëlle Salmon (2019). pkgreviewr: rOpenSci package
##   review project template. R package version 0.1.3.
##   https://github.com/ropenscilabs/pkgreviewr
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {pkgreviewr: rOpenSci package review project template},
##     author = {Anna Krystalli and Maëlle Salmon},
##     year = {2019},
##     note = {R package version 0.1.3},
##     url = {https://github.com/ropenscilabs/pkgreviewr},
##   }</code></pre>
</div>
</div>
<div id="dependency-management" class="section level2">
<h2>Dependency management</h2>
<p>It’s the job of the DESCRIPTION to <strong>list the packages that your package needs to work</strong>.</p>
<pre><code>Imports:
    devtools,
    git2r (&gt;= 0.23.0),
    usethis (&gt;= 1.2.0),
    here,
    reprex,
    gh,
    base64enc,
    whoami,
    magrittr,
    covr,
    goodpractice,
    assertthat,
    httr,
    rstudioapi,
    clipr,
    clisymbols,
    crayon,
    dplyr,
    glue,
    fs,
    urltools,
    shiny</code></pre>
<p>Imports are necessary dependencies for the functions in your package to work</p>
<pre><code>Suggests: 
    testthat,
    mockery,
    knitr,
    rmarkdown</code></pre>
<p>Suggests are dependencies that are not necessary for the functions in your package but might be neccessary to run all the vignettes or tests in your package</p>
</div>
<div id="r-1" class="section level2">
<h2><code>R/</code></h2>
<ul>
<li>Keep all functions in R scripts in <code>R/</code> folder</li>
</ul>
<pre><code>.
├── github.R
├── pkgreview.R
├── pkgreviewr-package.R
├── render-templates.R
├── rmd-utils.R
├── style.R
└── utils.R

0 directories, 7 files</code></pre>
<div id="example-function-script" class="section level3">
<h3>example function script</h3>
<p>Create a new function <code>.R</code> file in the <code>R/</code> folder</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb579-1" data-line-number="1"><span class="kw">library</span>(usethis)</a>
<a class="sourceLine" id="cb579-2" data-line-number="2"><span class="kw">use_r</span>(<span class="st">&quot;add&quot;</span>)</a></code></pre></div>
<pre><code>R
└── add.R

0 directories, 1 files</code></pre>
</div>
</div>
<div id="document-functions-with-roxygen" class="section level2">
<h2>Document functions with <code>Roxygen</code></h2>
<ul>
<li>Document functions with <strong>Roxygen</strong> notation</li>
<li>Automatically create help files on build</li>
</ul>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb581-1" data-line-number="1"><span class="co">#&#39; Add together two numbers.</span></a>
<a class="sourceLine" id="cb581-2" data-line-number="2"><span class="co">#&#39; </span></a>
<a class="sourceLine" id="cb581-3" data-line-number="3"><span class="co">#&#39; @param x A number.</span></a>
<a class="sourceLine" id="cb581-4" data-line-number="4"><span class="co">#&#39; @param y A number.</span></a>
<a class="sourceLine" id="cb581-5" data-line-number="5"><span class="co">#&#39; @return The sum of x and y.</span></a>
<a class="sourceLine" id="cb581-6" data-line-number="6"><span class="co">#&#39; @examples</span></a>
<a class="sourceLine" id="cb581-7" data-line-number="7"><span class="co">#&#39; add(1, 1)</span></a>
<a class="sourceLine" id="cb581-8" data-line-number="8"><span class="co">#&#39; add(10, 1)</span></a>
<a class="sourceLine" id="cb581-9" data-line-number="9">add &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</a>
<a class="sourceLine" id="cb581-10" data-line-number="10">  x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb581-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="tests" class="section level2">
<h2><code>tests/</code></h2>
<p>Tests provide confidence in what the code is doing.</p>
<p><em>Contents of <code>pkgreviewr</code> test folder</em></p>
<pre><code>.
├── testthat
│   ├── setup.R
│   ├── test-create-pkgreview.R
│   ├── test-gh-calls.R
│   ├── test-render-templates.R
│   └── test-setup.R
└── testthat.R

1 directory, 6 files</code></pre>
<div id="example-test" class="section level3">
<h3>Example test</h3>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb583-1" data-line-number="1"><span class="kw">use_test</span>(<span class="st">&quot;add&quot;</span>)</a></code></pre></div>
<pre><code>tests
├── testthat
│   ├── test-add.R
└── testthat.R</code></pre>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb585-1" data-line-number="1"><span class="kw">context</span>(<span class="st">&quot;test-add&quot;</span>)</a>
<a class="sourceLine" id="cb585-2" data-line-number="2"></a>
<a class="sourceLine" id="cb585-3" data-line-number="3"><span class="kw">test_that</span>(<span class="st">&quot;add works&quot;</span>, {</a>
<a class="sourceLine" id="cb585-4" data-line-number="4">  <span class="kw">expect_equal</span>(<span class="kw">add</span>(<span class="dv">2</span>, <span class="dv">2</span>), <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb585-5" data-line-number="5">})</a></code></pre></div>
<p>The <strong>R package structure</strong> can help with providing a logical organisation of files, by <strong>providing a set of standard locations for certain types of files</strong>.</p>
<p>To work with packages in RStudio we use the <strong>Build pane</strong>, which includes a variety of tools for <strong>building, documenting and testing packages</strong>. This will appear if Rstudio recognises the project as an R package.</p>
<p><img src="assets/build-panel.png" height="200px"></p>
<p><img src="assets/reproducible-data-analysis-19.jpg" /></p>
</div>
</div>
<div id="create-your-first-package" class="section level2">
<h2>💻Create your first package</h2>
<p>Let’s go ahead and create our first package! We do that as we would any project, but this time we select <strong><code>R package</code></strong> instead of <code>New Project</code>. Call your package <code>mypackage</code>.</p>
<div class="alert alert-info">
<strong>File &gt; New Project… &gt; New Directory &gt; R package &gt; mypackage </strong>
</div>
<p>Your new project should have the following structure. The build pane should also be visible.</p>
<pre><code>.
├── DESCRIPTION
├── NAMESPACE
├── R
│   └── hello.R
├── man
│   └── hello.Rd
└── mypackage.Rproj

2 directories, 5 files</code></pre>
</div>
<div id="functions-in-the-r-dir" class="section level2">
<h2>🚦 Functions in the <strong><code>R/</code></strong> dir</h2>
<p>Let’s inspect <strong><code>hello.R</code></strong></p>
<p>it contains a function that takes now arguments and prints <code>hello world</code> to the console when called. The comments above are just that, comments and don’t serve any functional purpose.</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb587-1" data-line-number="1"><span class="co"># Hello, world!</span></a>
<a class="sourceLine" id="cb587-2" data-line-number="2"><span class="co">#</span></a>
<a class="sourceLine" id="cb587-3" data-line-number="3"><span class="co"># This is an example function named &#39;hello&#39; </span></a>
<a class="sourceLine" id="cb587-4" data-line-number="4"><span class="co"># which prints &#39;Hello, world!&#39;.</span></a>
<a class="sourceLine" id="cb587-5" data-line-number="5"><span class="co">#</span></a>
<a class="sourceLine" id="cb587-6" data-line-number="6"><span class="co"># You can learn more about package authoring with RStudio at:</span></a>
<a class="sourceLine" id="cb587-7" data-line-number="7"><span class="co">#</span></a>
<a class="sourceLine" id="cb587-8" data-line-number="8"><span class="co">#   http://r-pkgs.had.co.nz/</span></a>
<a class="sourceLine" id="cb587-9" data-line-number="9"><span class="co">#</span></a>
<a class="sourceLine" id="cb587-10" data-line-number="10"><span class="co"># Some useful keyboard shortcuts for package authoring:</span></a>
<a class="sourceLine" id="cb587-11" data-line-number="11"><span class="co">#</span></a>
<a class="sourceLine" id="cb587-12" data-line-number="12"><span class="co">#   Build and Reload Package:  &#39;Cmd + Shift + B&#39;</span></a>
<a class="sourceLine" id="cb587-13" data-line-number="13"><span class="co">#   Check Package:             &#39;Cmd + Shift + E&#39;</span></a>
<a class="sourceLine" id="cb587-14" data-line-number="14"><span class="co">#   Test Package:              &#39;Cmd + Shift + T&#39;</span></a>
<a class="sourceLine" id="cb587-15" data-line-number="15"></a>
<a class="sourceLine" id="cb587-16" data-line-number="16">hello &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb587-17" data-line-number="17">  <span class="kw">print</span>(<span class="st">&quot;Hello, world!&quot;</span>)</a>
<a class="sourceLine" id="cb587-18" data-line-number="18">}</a></code></pre></div>
<div id="install-package." class="section level3">
<h3>Install package.</h3>
<p>You can install a package locally from it’s source code with function <code>install()</code></p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb588-1" data-line-number="1"><span class="kw">library</span>(devtools)</a>
<a class="sourceLine" id="cb588-2" data-line-number="2"><span class="kw">install</span>(<span class="st">&quot;.&quot;</span>)</a></code></pre></div>
<p>You can now load it like any other package…</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb589-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;mypackage&quot;</span>)</a></code></pre></div>
<p>And use your function!</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb590-1" data-line-number="1"><span class="kw">hello</span>()</a></code></pre></div>
<pre><code>## [1] &quot;Hello, world!&quot;</code></pre>
<hr />
</div>
</div>
<div id="roxygen-documentation" class="section level2">
<h2>🚦 Roxygen documentation</h2>
<p><a href="http://r-pkgs.had.co.nz/man.html"><code>Roxygen2</code></a> allows you to write specially-structured comments preceeding each function definition to document:</p>
<ul>
<li>the inputs and outputs</li>
<li>a description of what it does</li>
<li>an example of how to use it</li>
</ul>
<p>These are processed automatically to produce <code>.Rd</code> help files for your functions and control which functions are exported to the package <code>NAMESPACE</code>.</p>
<p>Let’s document our example function. First, clear the demo comments above the function and all contents of the example<code>NAMESPACE</code>. Also delete the file in the <code>man</code> folder.</p>
<div id="insert-roxygen-skeleton" class="section level3">
<h3>Insert Roxygen skeleton</h3>
<p>You can insert a Roxygen skeleton by placing the curson with a function and clicking:</p>
<blockquote>
<p><strong>Code &gt; Insert Roxygen Skeleton</strong></p>
</blockquote>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb592-1" data-line-number="1"><span class="co">#&#39; Title</span></a>
<a class="sourceLine" id="cb592-2" data-line-number="2"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb592-3" data-line-number="3"><span class="co">#&#39; @return</span></a>
<a class="sourceLine" id="cb592-4" data-line-number="4"><span class="co">#&#39; @export</span></a>
<a class="sourceLine" id="cb592-5" data-line-number="5"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb592-6" data-line-number="6"><span class="co">#&#39; @examples</span></a>
<a class="sourceLine" id="cb592-7" data-line-number="7">hello &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb592-8" data-line-number="8">  <span class="kw">print</span>(<span class="st">&quot;Hello, world!&quot;</span>)</a>
<a class="sourceLine" id="cb592-9" data-line-number="9">}</a></code></pre></div>
<div id="roxygen-basics" class="section level4">
<h4>Roxygen basics</h4>
<ul>
<li><p><code>roxygen</code> notation indicated by <strong>beginning line with <code>#'</code></strong>.</p></li>
<li><p><strong>First line</strong> will be the <strong>title</strong> for the function.</p></li>
<li><p>After title, include a blank <code>#'</code> line and then write a <strong>longer description.</strong></p></li>
<li><p><code>@param argument_name</code> <strong>description of the argument.</strong></p></li>
<li><p><code>@return</code> description of <strong>what the function returns.</strong></p></li>
<li><code>@export</code> tells <code>Roxygen2</code> to <strong>add this function to the <code>NAMESPACE</code></strong> file, so that it will be <strong>accessible to users.</strong></li>
<li><p><code>@examples</code> allows to include example of how to use a function</p></li>
</ul>
</div>
</div>
<div id="complete-roxygen-documentation" class="section level3">
<h3>Complete Roxygen documentation</h3>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb593-1" data-line-number="1"><span class="co">#&#39; Hello World! </span></a>
<a class="sourceLine" id="cb593-2" data-line-number="2"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb593-3" data-line-number="3"><span class="co">#&#39; Print hello greeting</span></a>
<a class="sourceLine" id="cb593-4" data-line-number="4"><span class="co">#&#39; @return prints hello greeting to console</span></a>
<a class="sourceLine" id="cb593-5" data-line-number="5"><span class="co">#&#39; @export</span></a>
<a class="sourceLine" id="cb593-6" data-line-number="6"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb593-7" data-line-number="7"><span class="co">#&#39; @examples</span></a>
<a class="sourceLine" id="cb593-8" data-line-number="8"><span class="co">#&#39; hello()</span></a>
<a class="sourceLine" id="cb593-9" data-line-number="9">hello &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb593-10" data-line-number="10">  <span class="kw">print</span>(<span class="st">&quot;Hello, world!&quot;</span>)</a>
<a class="sourceLine" id="cb593-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="autogenerate-documentation" class="section level3">
<h3>Autogenerate documentation</h3>
<p>Use function <code>devtools::document()</code> to create documentation. This re-creates a <code>hello.Rd</code> helpfile in the <code>man/</code> folder and populates the <code>NAMESPACE</code> with our functions</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb594-1" data-line-number="1">devtools<span class="op">::</span><span class="kw">document</span>()</a></code></pre></div>
<p>Click <strong>Install and Restart</strong> to re-install the package and make the documentation available.</p>
<p><img src="assets/roxygen-done.png" /></p>
<p>You can configure your build tools in the <strong>Global Options</strong> to automatically build documentation every time you <strong>Install &amp; Rebuild</strong></p>
<p><img src="assets/conf-build-tools.png" /></p>
</div>
</div>
<div id="personalise-function" class="section level2">
<h2>🚦 Personalise function</h2>
<p>Let’s go a step further and customise our function so that the greeting is from ourselves!</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb595-1" data-line-number="1"><span class="co">#&#39; Hello World!</span></a>
<a class="sourceLine" id="cb595-2" data-line-number="2"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb595-3" data-line-number="3"><span class="co">#&#39; Print hello greeting</span></a>
<a class="sourceLine" id="cb595-4" data-line-number="4"><span class="co">#&#39; @return prints hello greeting to console from me</span></a>
<a class="sourceLine" id="cb595-5" data-line-number="5"><span class="co">#&#39; @export</span></a>
<a class="sourceLine" id="cb595-6" data-line-number="6"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb595-7" data-line-number="7"><span class="co">#&#39; @examples</span></a>
<a class="sourceLine" id="cb595-8" data-line-number="8"><span class="co">#&#39; hello()</span></a>
<a class="sourceLine" id="cb595-9" data-line-number="9">hello &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb595-10" data-line-number="10">  <span class="kw">print</span>(<span class="st">&quot;Hello, world from Anna&quot;</span>)</a>
<a class="sourceLine" id="cb595-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="add-some-fun" class="section level2">
<h2>Add some fun!</h2>
<p>Programming is most useful for having fun. So let’s make our function extra fun!</p>
<p>We’ll use package <code>cowsay</code></p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb596-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;cowsay&quot;</span>)</a></code></pre></div>
<p>which has a single function <code>say</code>, which does this…</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb597-1" data-line-number="1">cowsay<span class="op">::</span><span class="kw">say</span>(<span class="st">&quot;Say whaaaaaat?&quot;</span>, <span class="dt">by =</span> <span class="st">&quot;shark&quot;</span>)</a></code></pre></div>
<pre><code>## 
##  -------------- 
## Say whaaaaaat? 
##  --------------
##     \
##       \
##         \
##               /&quot;&quot;-._
##               .       &#39;-,
##                :          &#39;&#39;,
##                 ;      *     &#39;.
##                  &#39; *         () &#39;.
##                    \               \
##                     \      _.---.._ &#39;.
##                     :  .&#39; _.--&#39;&#39;-&#39;&#39;  \ ,&#39;
##         .._           &#39;/.&#39;             . ;
##         ; `-.          ,                \&#39;
##          ;   `,         ;              ._\
##           ;    \     _,-&#39;                &#39;&#39;--._
##           :    \_,-&#39;                          &#39;-._
##           \ ,-&#39;                       .          &#39;-._
##           .&#39;         __.-&#39;&#39;;            \...,__       &#39;.
##         .&#39;      _,-&#39;        \              \   &#39;&#39;--.,__  &#39;\
##         /    _,--&#39; ;         \              ;           \^.}
##         ;_,-&#39; )     \  )\      )            ;
##              /       \/  \_.,-&#39;             ;
##             /                              ;
##          ,-&#39;  _,-&#39;&#39;&#39;-.    ,-.,            ;      PFA
##       ,-&#39; _.-&#39;        \  /    |/&#39;-._...--&#39;
##      :--``             )/
##   &#39;
## </code></pre>
<p>😜</p>
<p>So let’s create a function that randomly chooses one of the animals available in <code>cowsay</code> to deliver the greeting, and also allow the user to customise who the recipient of the greeting is</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb599-1" data-line-number="1"><span class="co">#&#39; Hello World!</span></a>
<a class="sourceLine" id="cb599-2" data-line-number="2"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb599-3" data-line-number="3"><span class="co">#&#39; Print personalised hello greeting from me.</span></a>
<a class="sourceLine" id="cb599-4" data-line-number="4"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb599-5" data-line-number="5"><span class="co">#&#39; @param name character string. Your name!</span></a>
<a class="sourceLine" id="cb599-6" data-line-number="6"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb599-7" data-line-number="7"><span class="co">#&#39; @return prints hello greeting to console</span></a>
<a class="sourceLine" id="cb599-8" data-line-number="8"><span class="co">#&#39; @export</span></a>
<a class="sourceLine" id="cb599-9" data-line-number="9"><span class="co">#&#39;</span></a>
<a class="sourceLine" id="cb599-10" data-line-number="10"><span class="co">#&#39; @examples</span></a>
<a class="sourceLine" id="cb599-11" data-line-number="11"><span class="co">#&#39; hello()</span></a>
<a class="sourceLine" id="cb599-12" data-line-number="12"><span class="co">#&#39; hello(&quot;Lucy Elen&quot;)</span></a>
<a class="sourceLine" id="cb599-13" data-line-number="13">hello &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">name =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb599-14" data-line-number="14">    </a>
<a class="sourceLine" id="cb599-15" data-line-number="15">    <span class="co"># create greeting</span></a>
<a class="sourceLine" id="cb599-16" data-line-number="16">    <span class="cf">if</span>(<span class="kw">is.null</span>(name)){name &lt;-<span class="st"> &quot;world&quot;</span>}</a>
<a class="sourceLine" id="cb599-17" data-line-number="17">    greeting &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Hello&quot;</span>, name, <span class="st">&quot;from Anna!&quot;</span>)</a>
<a class="sourceLine" id="cb599-18" data-line-number="18"></a>
<a class="sourceLine" id="cb599-19" data-line-number="19">    <span class="co"># randomly sample an animal</span></a>
<a class="sourceLine" id="cb599-20" data-line-number="20">    animal_names &lt;-<span class="st"> </span><span class="kw">names</span>(cowsay<span class="op">::</span>animals)</a>
<a class="sourceLine" id="cb599-21" data-line-number="21">    i &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(animal_names), <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb599-22" data-line-number="22"></a>
<a class="sourceLine" id="cb599-23" data-line-number="23">    cowsay<span class="op">::</span><span class="kw">say</span>(greeting, animal_names[i])</a>
<a class="sourceLine" id="cb599-24" data-line-number="24">}</a></code></pre></div>
<p>Document, Install and restart to load our changes</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb600-1" data-line-number="1"><span class="kw">hello</span>(<span class="st">&quot;y&#39;all&quot;</span>)</a></code></pre></div>
<pre><code>## 
##  -------------- 
## Hello y&#39;all from Anna! 
##  --------------
##     \
##       \
##         \
##      /\-/\
##     /a a  \                                 _
##    =\ Y  =/-~~~~~~-,_______________________/ )
##      ‛^--‛          ________________________/
##        \           /
##        ||  |---‛\  \
##   jgs  (_(__|   ((__|
## </code></pre>
</div>
<div id="check-package-integrity" class="section level2">
<h2>🚦 Check package integrity</h2>
<p>An <strong>important part of the package development process is <code>R CMD check</code></strong>. <code>R CMD check</code> automatically <strong>checks your code</strong> and can <strong>automatically detects many common problems</strong> that we’d otherwise discover the hard way.</p>
<p>To check our package, we can:</p>
<ul>
<li><p>use <code>devtools::check()</code></p></li>
<li><p>press Ctrl/Cmd + Shift + E</p></li>
<li><p>click on the ✅<strong>Check</strong> tab in the <strong>Build</strong> panel.</p></li>
</ul>
<p>This:</p>
<ul>
<li><p><strong>Ensures that the documentation is up-to-date</strong> by running
<code>devtools::document()</code>.</p></li>
<li><p><strong>Bundles the package</strong> before checking it.</p></li>
</ul>
<p>More info on <a href="http://r-pkgs.had.co.nz/check.html">checks</a> here.</p>
<p><br></p>
<p>Both these run <code>R CMD check</code> which <strong>return three types of messages</strong>:</p>
<ul>
<li><p><strong>ERRORs</strong>: Severe problems that you should fix regardless of whether or not you’re submitting to CRAN.</p></li>
<li><p><strong>WARNINGs</strong>: Likely problems that you must fix if you’re planning to submit to CRAN (and a good idea to look into even if you’re not).</p></li>
<li><p><strong>NOTEs</strong>: Mild problems. If you are submitting to CRAN, you should strive to eliminate all NOTEs, even if they are false positives.</p></li>
</ul>
<p>Let’s <strong>Check</strong> our package:</p>
<p>Click on the <strong>Check</strong> button (📋 ✅)</p>
<pre><code>   
── R CMD check results ──────────────────────────────────── mypackage 0.1.0 ────
Duration: 8.4s

❯ checking DESCRIPTION meta-information ... WARNING
  Non-standard license specification:
    What license is it under?
  Standardizable: FALSE

❯ checking dependencies in R code ... WARNING
  &#39;::&#39; or &#39;:::&#39; import not declared from: ‘cowsay’

0 errors ✔ | 2 warnings ✖ | 0 notes ✔
Error: R CMD check found WARNINGs
Execution halted

Exited with status 1.</code></pre>
<p>Aha, so our checks have thrown up some warnings! First, it’s telling us we haven’t added a <code>LICENSE</code>. It’s also telling us that we have a dependency (import) from package <code>cowsay</code> which we haven’t documented in the <code>DESCRIPTION</code> file. <code>usethis</code> to the rescue!</p>
</div>
<div id="add-dependencies" class="section level2">
<h2>🚦 Add dependencies</h2>
<p>Add <code>cowsay</code> as a dependency.</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb603-1" data-line-number="1">usethis<span class="op">::</span><span class="kw">use_package</span>(<span class="st">&quot;cowsay&quot;</span>)</a></code></pre></div>
<pre><code>✔ Setting active project to &#39;/Users/Anna/Desktop/mypackage&#39;
✔ Adding &#39;cowsay&#39; to Imports field in DESCRIPTION
● Refer to functions with `cowsay::fun()`</code></pre>
</div>
<div id="add-license" class="section level2">
<h2>Add License</h2>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb605-1" data-line-number="1">usethis<span class="op">::</span><span class="kw">use_mit_license</span>()</a></code></pre></div>
<p><img src="assets/clear-checks.png" /></p>
<p>Check again…All should be good!</p>
<pre><code>── R CMD check results ──────────────────────────────────── mypackage 0.1.0 ────
Duration: 9.3s

0 errors ✔ | 0 warnings ✔ | 0 notes ✔

R CMD check succeeded</code></pre>
<hr />
</div>
<div id="add-test" class="section level2">
<h2>🚦 Add Test</h2>
<p><strong>Testing is a vital part of package development</strong>. It ensures that our code does what you want it to do.</p>
<p>Once you’re set up with a testing framework, the workflow is simple:</p>
<ol style="list-style-type: decimal">
<li><p>Modify your code or tests.</p></li>
<li><p>Test your package with Ctrl/Cmd + Shift + T or <code>devtools::test()</code>.</p></li>
<li><p>Repeat until all tests pass.</p></li>
</ol>
</div>
<div id="create-test-file" class="section level2">
<h2>create test file</h2>
<p>To create a new test file (and the testing framework if required), use function
<code>usethis::use_test()</code>. It’s good practice to name the test files after the <code>.R</code> files containing the functions being tested.</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb607-1" data-line-number="1"><span class="kw">use_test</span>(<span class="st">&quot;hello&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb608-1" data-line-number="1">✔ Setting active project to <span class="st">&#39;/Users/Anna/Documents/workflows/workshops/materials/mypackage&#39;</span></a>
<a class="sourceLine" id="cb608-2" data-line-number="2">✔ Adding <span class="st">&#39;testthat&#39;</span> to Suggests field <span class="cf">in</span> DESCRIPTION</a>
<a class="sourceLine" id="cb608-3" data-line-number="3">✔ Creating <span class="st">&#39;tests/testthat/&#39;</span></a>
<a class="sourceLine" id="cb608-4" data-line-number="4">✔ Writing <span class="st">&#39;tests/testthat.R&#39;</span></a>
<a class="sourceLine" id="cb608-5" data-line-number="5">✔ Writing <span class="st">&#39;tests/testthat/test-hello.R&#39;</span></a>
<a class="sourceLine" id="cb608-6" data-line-number="6">● Modify <span class="st">&#39;tests/testthat/test-hello.R&#39;</span></a></code></pre></div>
<p>This just created the following folders and files</p>
<pre><code>tests
├── testthat
│   └── test-hello.R
└── testthat.R

1 directory, 2 files</code></pre>
<p>It also added <code>testthat</code> to the suggested packages in the <code>DESCRIPTION</code> file.</p>
<pre><code>Suggests: 
    testthat</code></pre>
<p>That’s because you don’t need test that to run the functions in <code>mypackage</code>, but you do
if you want to run the tests.</p>
<p>When the tests are run (either through running <code>devtools::test()</code>, clicking on <strong>More &gt; Test Package</strong> in the Build panel or <code>Cmd/Ctrl + Shift + T</code>), the code in each test script in directory <code>testthat</code> is run.</p>
<p><strong><code>test-hello.R</code></strong></p>
<p>Let’s load the library so we can explore the <code>testthat</code> testing framework</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb611-1" data-line-number="1"><span class="kw">library</span>(testthat)</a></code></pre></div>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb612-1" data-line-number="1"><span class="kw">context</span>(<span class="st">&quot;test-hello&quot;</span>)</a>
<a class="sourceLine" id="cb612-2" data-line-number="2"></a>
<a class="sourceLine" id="cb612-3" data-line-number="3"><span class="kw">test_that</span>(<span class="st">&quot;multiplication works&quot;</span>, {</a>
<a class="sourceLine" id="cb612-4" data-line-number="4">  <span class="kw">expect_equal</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb612-5" data-line-number="5">})</a></code></pre></div>
<p>If the test doesn’t pass it throws an error</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb613-1" data-line-number="1"><span class="kw">context</span>(<span class="st">&quot;test-hello&quot;</span>)</a>
<a class="sourceLine" id="cb613-2" data-line-number="2"></a>
<a class="sourceLine" id="cb613-3" data-line-number="3"><span class="kw">test_that</span>(<span class="st">&quot;multiplication works&quot;</span>, {</a>
<a class="sourceLine" id="cb613-4" data-line-number="4">  <span class="kw">expect_equal</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb613-5" data-line-number="5">})</a></code></pre></div>
<pre><code>## Error: Test failed: &#39;multiplication works&#39;
## * &lt;text&gt;:4: 2 * 2 not equal to 5.
## 1/1 mismatches
## [1] 4 - 5 == -1</code></pre>
</div>
<div id="write-test" class="section level2">
<h2>Write test</h2>
<p>Let’s write a simple test to check that we are getting an expected output type. The first thing to note, looking at the <code>say()</code> documentation is that it takes an argument <code>type</code> which allows us to specify the output we want. It defaults <code>message</code> which means the output of the function is returned as a message.</p>
<p>We can therefore use <code>testthat::expect_message()</code></p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb615-1" data-line-number="1"><span class="kw">context</span>(<span class="st">&quot;test-hello&quot;</span>)</a>
<a class="sourceLine" id="cb615-2" data-line-number="2"></a>
<a class="sourceLine" id="cb615-3" data-line-number="3"><span class="kw">test_that</span>(<span class="st">&quot;hello works&quot;</span>, {</a>
<a class="sourceLine" id="cb615-4" data-line-number="4">  <span class="kw">expect_message</span>(<span class="kw">hello</span>())</a>
<a class="sourceLine" id="cb615-5" data-line-number="5">})</a></code></pre></div>
<pre><code>## 
##  ----- 
## Hello world from Anna! 
##  ------ 
##     \   
##      \
##        &#39;\__
##       (o )     ___
##       &lt;&gt;(_)(_)(___)
##         &lt; &lt; &gt; &gt;
##         &#39; &#39; ` `  [nosig]
## </code></pre>
<pre><code>## Error: Test failed: &#39;hello works&#39;
## * &lt;text&gt;:4: `hello()` did not produce any messages.</code></pre>
<p>Now let’s test our package</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb618-1" data-line-number="1">devtools<span class="op">::</span><span class="kw">test</span>()</a></code></pre></div>
<p>Success!</p>
<pre><code>==&gt; devtools::test()

Loading mypackage
Testing mypackage
✔ | OK F W S | Context
✔ |  1       | test-hello

══ Results ════════════════════════════════════════════════════════
OK:       1
Failed:   0
Warnings: 0
Skipped:  0</code></pre>
</div>
<div id="complete-package-metadata" class="section level2">
<h2>🚦 Complete package metadata</h2>
<p>Let’s head to the <code>DESCRIPTION</code> file and complete the details.</p>
</div>
<div id="authors" class="section level2">
<h2>Authors</h2>
<p>First let’s complete the authors. Remove the current author and maintainer lines and replace it with the following line:</p>
<pre><code>Authors@R: person(&quot;First&quot;, &quot;Last&quot;, email = &quot;first.last@example.com&quot;, role = c(&quot;aut&quot;, &quot;cre&quot;))</code></pre>
<p>completed with your own details</p>
</div>
<div id="add-a-title-and-description" class="section level2">
<h2>Add a title and description</h2>
<p>Complete the title and description fields with appropriate details. If you want to form a paragraph of text, make sure do indent the hanging lines by 4 spaces (one tab). And make sure that your Description field <strong>ends in a full-stop</strong>.</p>
</div>
<div id="add-a-date" class="section level2">
<h2>Add a date</h2>
<p>Use today’s date in ISO format, ie <code>2019-04-10</code>. This will populate a citation entry for us.</p>
<div id="completed-description" class="section level3">
<h3>Completed <code>DESCRIPTION</code></h3>
<p>The complete <code>DESCRIPTION</code> file should look something like this:</p>
<pre><code>Package: mypackage
Type: Package
Title: Customised greetings from me!
Version: 0.1.0
Authors@R: person(&quot;Anna&quot;, &quot;Krystalli&quot;, 
  email = &quot;annakrystalli@googlemail.com&quot;, 
  role = c(&quot;aut&quot;, &quot;cre&quot;))
Description: Prints a customised greeting from myself, 
    delivered by a friend.
License: MIT + file LICENSE
Encoding: UTF-8
LazyData: true
RoxygenNote: 6.1.1
Imports: 
    cowsay
Suggests: 
    testthat
Date: 2019-04-10</code></pre>
<p>Check your package. If all is good, document, install and restart!</p>
<p>Now, check you’re package’s citation:</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb622-1" data-line-number="1"><span class="kw">citation</span>(<span class="st">&quot;mypackage&quot;</span>)</a></code></pre></div>
<pre><code>## 
## To cite package &#39;mypackage&#39; in publications use:
## 
##   Anna Krystalli (2019). mypackage: Customised greetings from me!. R
##   package version 0.1.0.
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {mypackage: Customised greetings from me!},
##     author = {Anna Krystalli},
##     year = {2019},
##     note = {R package version 0.1.0},
##   }</code></pre>
</div>
</div>
<div id="create-readme" class="section level2">
<h2>🚦 Create README</h2>
<p>The final document you will need for your package is a <code>README</code>.</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb624-1" data-line-number="1">usethis<span class="op">::</span><span class="kw">use_readme_rmd</span>()</a></code></pre></div>
<pre><code>✔ Writing &#39;README.Rmd&#39;
✔ Adding &#39;^README\\.Rmd$&#39; to &#39;.Rbuildignore&#39;
● Modify &#39;README.Rmd&#39;
✔ Writing &#39;.git/hooks/pre-commit&#39;</code></pre>
<p>Because it’s an <code>.Rmd</code> but GitHub can only display an <code>md</code> document as it’s landing page, this is a special <code>.Rmd</code> that renders to a markdown document rather than <code>html</code>. The function adds a check to <code>.git</code> to ensure you commit an up to date version on the <code>md</code> when you commit changes to the <code>.Rmd</code>.</p>
<p>Complete the README, including an example.</p>
</div>
<div id="commit-and-push-to-github" class="section level2">
<h2>Commit and push to GitHub</h2>
<p>Now you have everything you need to share your package on GitHub so commit and push it up.</p>
<p>Anyone will be able to install it using, eg:</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb626-1" data-line-number="1">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;annakrystalli/mypackage&quot;</span>)</a></code></pre></div>
</div>
<div id="create-documentation-site" class="section level2">
<h2>🚦 Create documentation site</h2>
<p>You can use package <code>pkgdown</code> to create an online site for your documentation:</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb627-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;pkgdown&quot;</span>)</a>
<a class="sourceLine" id="cb627-2" data-line-number="2">pkgdown<span class="op">::</span><span class="kw">build_site</span>()</a></code></pre></div>
<pre><code>══ Building pkgdown site ════════════════════════════════════════════
Reading from: &#39;/Users/Anna/Documents/workflows/dummy/mypackage&#39;
Writing to:   &#39;/Users/Anna/Documents/workflows/dummy/mypackage/docs&#39;
── Initialising site ────────────────────────────────────────────────
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/docsearch.css&#39; to &#39;docsearch.css&#39;
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/docsearch.js&#39; to &#39;docsearch.js&#39;
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/link.svg&#39; to &#39;link.svg&#39;
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/pkgdown.css&#39; to &#39;pkgdown.css&#39;
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/pkgdown.js&#39; to &#39;pkgdown.js&#39;
── Building home ────────────────────────────────────────────────────
Writing &#39;authors.html&#39;
Reading &#39;LICENSE.md&#39;
Writing &#39;LICENSE.html&#39;
Writing &#39;LICENSE-text.html&#39;
Reading &#39;README.Rmd&#39;
Writing &#39;index.html&#39;
── Building function reference ──────────────────────────────────────
Updating mypackage documentation
Writing NAMESPACE
Loading mypackage
Writing NAMESPACE
Writing &#39;reference/index.html&#39;
Loading mypackage
Reading &#39;man/hello.Rd&#39;
Writing &#39;reference/hello.html&#39;
══ DONE ═════════════════════════════════════════════════════════════
── Previewing site ──────────────────────────────────────────────────</code></pre>
<p>This creates html documentation for our package in the <code>docs/</code> folder.</p>
<ul>
<li>Commit and push the <code>docs/</code> folder to GitHub</li>
<li>Make the site live by enabling gh-pages. Set it to serve content from the <code>docs</code> folder.</li>
</ul>
<p>Your package is now installable from GitHub, has online documentation and should have this final structure:</p>
<pre><code>.
├── DESCRIPTION
├── LICENSE
├── LICENSE.md
├── NAMESPACE
├── R
│   └── hello.R
├── README.Rmd
├── README.md
├── docs
│   ├── LICENSE-text.html
│   ├── LICENSE.html
│   ├── authors.html
│   ├── docsearch.css
│   ├── docsearch.js
│   ├── index.html
│   ├── link.svg
│   ├── pkgdown.css
│   ├── pkgdown.js
│   ├── pkgdown.yml
│   └── reference
│       ├── hello.html
│       └── index.html
├── man
│   └── hello.Rd
├── mypackage.Rproj
└── tests
    ├── testthat
    │   └── test-hello.R
    └── testthat.R

6 directories, 23 files</code></pre>
<p>Check out my complete example <a href="https://github.com/annakrystalli/mypackage-demo">here</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="additional.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="creating-a-research-compendium-with-rrtools.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rrresearchACCE20.pdf", "rrresearchACCE20.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
